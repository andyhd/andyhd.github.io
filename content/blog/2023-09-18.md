Date: 2023-09-18 16:02
Title: PHP rtx macos
Friendly-Date: a sunny Monday afternoon after the rain
Status: draft


# PHP rtx macos

I have to do some PHP work for the first time in a looong time.

## Installing PHP

I've switched to rtx for managing versions of programming language installs on
my MBP. It makes sense to have one tool for this instead of pyenv, nvm, rbenv,
etc.

But the last time I used PHP was around the transition from version 3 to 4 and
that was before I started using Macs.

## Attempt #1

First thing I tried was the obvious:

    rtx install php

But that failed with complaints about autoconf. Ok -

    brew install autoconf

## Attempt #2

Then rtx install again, but this time it complains it can't find gmp

Searched rtx php gmp and didn't get much help, but I was reminded that rtx uses
asdf plugins, and the asdf-php github page says we need to install the
following:

    brew install gmp libsodium imagemagick

## Attempt #3

Then I tried rtx install again, but now it complains about bison

    brew install bison

## Attempt #4

At this point, I started writing this blog post, because this is a giant yak.

Now again, rtx install php. Nope. re2c is required to generate PHP lexers. Ok.

    brew install re2c

## Attempt #5

Try again with rtx install php

Bah, now the pkg-config script could not be found or is too old. wat.

    brew install pkg-config

## Attempt #6

Forgetting what I was installing PHP for...

Argh! No package 'gdlib' found.

    brew install libgd

## Attempt #7

No error message, just failed! Ok, try again with debug output:

    RTX_DEBUG=1 rtx install php
    
Right, now it is complaining about iconv.

    brew install libiconv

## Attempt #8

Keeping debug output on, just in case...

Ugh, found a github gist that mentions installing libxml2, libiconv, apr and
apr-util first.

No package 'icu-uc' :(

    brew install icu4c

## Attempt #9

Hnng. No package 'libzip' found

    brew install libzip

## Attempt #10

Oh! It's compiling at last!

I think it has finally worked!

## Now for the ugly part

I have to actually write some PHP code now...
